<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="jquery-2.1.1.js"></script>
    <style type="text/css">
        html,body{width:100%;height: 100%;}
        body{background:#298AAB}
        .wrap{width: 355px;height: 355px;margin: 50px auto 0;position: relative;}
        .pointer{width: 155px;height:155px;border-radius: 50% 50% 50% 0;background:linear-gradient(to bottom,#F3DB17,#FAE36F);border: 5px solid brown;position: absolute;left:95px;
            top:95px;}
    </style>
</head>
<body>
    <div class="wrap">
        <img src="penal.jpg" alt="penal">
        <div class="pointer"></div>
    </div>
    <button id="btn">开始抽奖</button>
<script type="text/javascript">
    $(function(){
        var timer,d,i,j,end;
        $('.pointer').css({
            'transform':'rotateZ('+ 135 +'deg)'
        });
        $('#btn').on('click',function(){
            if($(this).text()=='再来一次'){
                clearInterval(timer);
            }
            turn();
            d = 135;
            i = 0;
            j = 0;
            end = 15;
            n = parseInt(Math.random() * 361);
            $(this).text('再来一次')
        })
        function turn(){
           timer = setInterval(function(){
               jugeLoop(j);
               if(j<10){
                   if(i%180 == 0){
                       i = i == 180 ? 180:0
                       j++;
                   }
                   $('.pointer').css({
                       'transform':'rotateZ('+ ( d + i) +'deg)'
                   });
               }else{
                   end += 0.2;
                   if( end < n ){
                       $('.pointer').css({
                           'transform':'rotateZ('+ ( d + end - 15 ) +'deg)'
                       });
                   }else{
                       juge(end);
                       clearInterval(timer);
                   };
               }
            },2);
        }

        function jugeLoop(l){
            switch (l){
                case 0:
                case 9:
                    i+=0.5;
                    break;
                case 1:
                case 8:
                    i += 1;
                    break;
                case 2:
                case 7:
                    i += 3;
                    break;
                case 3:
                case 6:
                    i += 5;
                    break;
                case 4:
                case 5:
                    i += 7;
                    break;
            }
        }

        function juge(j) {
            var temp = Math.ceil(j / 30);
            switch (temp) {
                case 1:
                    alert('一等奖');
                    break;
                case 2:
                    alert('不要灰心');
                    break;
                case 4:
                    alert('就差一点');
                    break;
                case 5:
                    alert('三等奖');
                    break;
                case 6:
                    alert('再来一次')
                    break;
                case 8:
                    alert('祝您好运');
                    break;
                case 9:
                    alert('二等奖');
                    break;
                case 10:
                    alert('好运到');
                    break;
                case 12:
                    alert('谢谢');
                    break;
                default:
                    alert('空空如洗');
                    break;
            }
        }
    })
</script>
</body>
</html>